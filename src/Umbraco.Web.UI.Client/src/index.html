<!doctype html>
<html lang="en">
    <head>
        <base href="/belle/" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title ng-bind="locationTitle">Umbraco</title>
        <link rel="stylesheet" href="assets/css/umbraco.css" />
    </head>

    <body 
        ng-class="{touch:touchDevice}" 
        ng-controller="Umbraco.MainController" id="umbracoMainPageBody">
    
        <div 
            ng-hide="!authenticated" 
            ng-cloak 
            class="app-wrapper umb-abs-fullsize" 
            ng-click="closeDialogs($event)">

            <header class="app-header"> 
                <div class="app-header-avatar">
                    <a href 
                        ng-click="avatarClick()" 
                        hotkey="ctrl+shift+u"
                        title="{{user.name}}" prevent-default>
                            <img id="avatar-img" ng-src="{{avatar}}" />
                    </a> 
                </div>

                <div class="app-header-search">
                    <input type="text" placeholder="Type to search..." value="" /> {{showNavigation}}
                </div>
                
                <div class="app-header-toolbar">
                    <ul class="inline pull-right">
                        <li>
                            <a href class="action-help" hotkey="ctrl+shift+h" ng-click="helpClick()">
                                <i class="icon-help-alt"></i>
                                <span><localize key="sections_help">Help</localize></span>
                            </a>
                        </li>

                        <li>
                            <a href class="action-logout">
                                <i class="icon-logout"></i>
                            </a>
                        </li>

                    </ul>

                </div>
                
                     
            </header>

            <main class="app-layout">
                
                <nav class="app-navigation slide-right"
                    ng-show="authenticated" 
                    ng-controller="Umbraco.NavigationController" 
                    ng-mouseleave="leaveTree($event)" 
                    ng-mouseenter="enterTree($event)">        
                    
                    <div class="app-navigation-sections umb-abs-fullsize ">
                        <umb-sections sections="sections"></umb-sections>
                    </div>
                    

                    <div 
                        class="app-navigation-tree umb-abs-fullsize shadow-depth-1" 
                        ng-show="showNavigation">

                        <umb-tree 
                            cachekey="_"
                            eventhandler="treeEventHandler" 
                            section="{{currentSection}}">
                        </umb-tree>
                    </div>


                    <div 
                        class="app-navigation-menu umb-dialog umb-abs-fullsize shadow-depth-3 slide-in-left" 
                        ng-swipe-left="nav.hideMenu()" 
                        ng-show="showContextMenu">

                        <umb-context-menu                     
                            menu-dialog-title="{{menuDialogTitle}}"
                            current-section="{{currentSection}}"
                            current-node="menuNode"
                            menu-actions="menuActions">
                        </umb-context-menu> 
                    </div>
                    

                    <div 
                        class="app-navigation-dialog umb-dialog umb-abs-fullsize shadow-depth-3 slide-in-left"
                        ng-swipe-left="nav.hideDialog()"
                        ng-show="showContextMenuDialog">

                        <div class='umb-modalcolumn-header'>
                            <h1>{{menuDialogTitle}}</h1>
                        </div>

                        <div class='umb-modalcolumn-body'>
                            
                        </div>
                    </div>


                </nav>
            
                <section class="app-content shadow-depth-1" ng-view>

                </section>
            </main>
        </div>

        <div class="app-notifications" ng-cloak>
            <umb-notifications></umb-notifications>
        </div>


        <div class="app-dialogs" ng-cloak>
                <div 
                    ng-repeat="dialog in dialogs"
                    ng-swipe-right="swipeHide($event)"
                    ng-class="{{dialog.cssClass}}" >

                    <div
                        ng-cloak 
                        class="umb-dialog-body"
                        ng-controller="Umbraco.DialogController">

                            <div ng-include="dialog.template"
                                onload="alert('this')">
                            </div>

                    </div>

                    <iframe 
                        ng-if="dialog.iframe == true"
                        style='border: none; width: 100%; height: 100%;' 
                        class="umb-dialog-body umb-dialog-iframe"
                        src="{{dialog.template}}"></iframe>    

                </div>
        </div>


        <script src="lib/lazyload/lazyload.min.js"></script>
        <script src="js/loader.js"></script>
    </body>
</html>
